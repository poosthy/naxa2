{% extends 'base.html.twig' %}

{% block title %}Hello ContactController!{% endblock %}

{% block body %}
<style>
    .example-wrapper {
        margin: 1em auto;
        max-width: 800px;
        width: 95%;
        font: 18px/1.5 sans-serif;
    }

    .example-wrapper code {
        background: #F5F5F5;
        padding: 2px 6px;
    }
</style>

<div class="example-wrapper">
    {{ form_start(our_form) }}
    {{ form_widget(our_form) }}
    {{ form_end(our_form) }}
</div>
{% endblock %}
{% block javascripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
    $('#app_contact_sujet').change(function () {
        var sujetSelector = $(this);

        // Request the neighborhoods of the selected city.
        $.ajax({
            url: "{{ path('contact_list_sujets') }}",
            type: "GET",
            dataType: "JSON",
            data: {
                sujetid: sujetSelector.val()
            },
            success: function (sujets) {
                var sujetSelect = $("#app_contact_sujet");

                // Remove current options
                sujetSelect.html('');

                // Empty value ...
                sujetSelect.append('<option value> Selectionnez un sujet ' + sujetSelector.find("option:selected").text() + ' ...</option>');


                $.each(sujets, function (key, sujet) {
                    sujetSelect.append('<option value="' + sujet.id + '">' + sujet.nom + '</option>');
                });
            },
            error: function (err) {
                alert("Une erreur s'est produite pendant le chargement des donn√©es...");
            }
        });
    });
</script>
{% endblock %}